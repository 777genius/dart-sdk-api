import{_ as s,o as i,c as t,ag as e}from"./chunks/framework.BHT9daFK.js";const c=JSON.parse('{"title":"dart:js","description":"API documentation for the dart:js library","frontmatter":{"title":"dart:js","description":"API documentation for the dart:js library","outline":[2,3],"editLink":false,"prev":false,"next":false},"headers":[],"relativePath":"api/Dart_dart-js/index.md","filePath":"api/Dart_dart-js/index.md"}'),n={name:"api/Dart_dart-js/index.md"};function r(h,a,l,p,d,o){return i(),t("div",null,[...a[0]||(a[0]=[e(`<h1 id="dart-js" tabindex="-1">dart:js <a class="header-anchor" href="#dart-js" aria-label="Permalink to &quot;dart:js&quot;">​</a></h1><p>Low-level support for interoperating with JavaScript.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You should usually use <code>dart:js_interop</code> instead of this library. To learn more, check out the <a href="https://dart.dev/interop/js-interop" target="_blank" rel="noreferrer">JS interop documentation</a>.</p></div><p>This library provides access to JavaScript objects from Dart, allowing Dart code to get and set properties, and call methods of JavaScript objects and invoke JavaScript functions. The library takes care of converting between Dart and JavaScript objects where possible, or providing proxies if conversion isn&#39;t possible.</p><p>This library does not make Dart objects usable from JavaScript, their methods and properties are not accessible, though it does allow Dart functions to be passed into and called from JavaScript.</p><p><a href="/dart-sdk-api/api/Dart_dart-js/JsObject.html">JsObject</a> is the core type and represents a proxy of a JavaScript object. JsObject gives access to the underlying JavaScript objects properties and methods. <a href="./JsObject.html" class="api-link"><code>JsObject</code></a>s can be acquired by calls to JavaScript, or they can be created from proxies to JavaScript constructors.</p><p>The top-level getter <a href="/dart-sdk-api/api/dart-js/context.html">context</a> provides a <a href="/dart-sdk-api/api/Dart_dart-js/JsObject.html">JsObject</a> that represents the global object in JavaScript, usually <code>window</code>.</p><p>The following example shows an alert dialog via a JavaScript call to the global function <code>alert()</code>:</p><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dart:js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;alert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello from Dart!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><p>This example shows how to create a <a href="/dart-sdk-api/api/Dart_dart-js/JsObject.html">JsObject</a> from a JavaScript constructor and access its properties:</p><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;dart:js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JsObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  object[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;greeting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  object[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;greet&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (name) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">object</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;greeting&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;greet&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;JavaScript&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  context[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;console&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [message]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="proxying-and-automatic-conversion" tabindex="-1">Proxying and automatic conversion <a class="header-anchor" href="#proxying-and-automatic-conversion" aria-label="Permalink to &quot;Proxying and automatic conversion {#proxying-and-automatic-conversion}&quot;">​</a></h2><p>When setting properties on a JsObject or passing arguments to a JavaScript method or function, Dart objects are automatically converted or proxied to JavaScript objects. When accessing JavaScript properties, or when a Dart closure is invoked from JavaScript, the JavaScript objects are also converted to Dart.</p><p>Functions and closures are proxied in such a way that they are callable. A Dart closure assigned to a JavaScript property is proxied by a function in JavaScript. A JavaScript function accessed from Dart is proxied by a <a href="/dart-sdk-api/api/Dart_dart-js/JsFunction.html">JsFunction</a>, which has a <a href="/dart-sdk-api/api/Dart_dart-js/JsFunction.html#apply">JsFunction.apply</a> method to invoke it.</p><p>The following types are transferred directly and not proxied:</p><ul><li>Basic types: <code>null</code>, <code>bool</code>, <code>num</code>, <code>String</code>, <code>DateTime</code></li><li><a href="../Dart_dart-typed_data/TypedData.html" class="api-link"><code>TypedData</code></a>, including its subclasses like <a href="../Dart_dart-typed_data/Int32List.html" class="api-link"><code>Int32List</code></a>, but <em>not</em><a href="../Dart_dart-typed_data/ByteBuffer.html" class="api-link"><code>ByteBuffer</code></a></li><li>When compiling for the web, also: <a href="../dart-html/Blob.html" class="api-link"><code>Blob</code></a>, <a href="../dart-html/Event.html" class="api-link"><code>Event</code></a>, <a href="../dart-html/ImageData.html" class="api-link"><code>ImageData</code></a>, <a href="../dart-dom-indexed_db/KeyRange.html" class="api-link"><code>KeyRange</code></a>, <a href="../dart-html/Node.html" class="api-link"><code>Node</code></a>, and <a href="../dart-html/Window.html" class="api-link"><code>Window</code></a>.</li></ul><h2 id="converting-collections-with-jsobjectjsify" tabindex="-1">Converting collections with JsObject.jsify() <a class="header-anchor" href="#converting-collections-with-jsobjectjsify" aria-label="Permalink to &quot;Converting collections with JsObject.jsify() {#converting-collections-with-jsobjectjsify}&quot;">​</a></h2><p>To create a JavaScript collection from a Dart collection use the <a href="/dart-sdk-api/api/Dart_dart-js/JsObject.html#jsify">JsObject.jsify</a> constructor, which converts Dart <a href="/dart-sdk-api/api/Dart_dart-core/Map.html">Map</a>s and <a href="/dart-sdk-api/api/Dart_dart-core/Iterable.html">Iterable</a>s into JavaScript Objects and Arrays.</p><p>The following expression creates a new JavaScript object with the properties <code>a</code> and <code>b</code> defined:</p><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JsObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jsify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>This expression creates a JavaScript array:</p><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jsArray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JsObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jsify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><h2 id="section-classes" tabindex="-1">Classes <a class="header-anchor" href="#section-classes" aria-label="Permalink to &quot;Classes {#section-classes}&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Class</th><th>Description</th></tr></thead><tbody><tr><td><a href="/dart-sdk-api/api/Dart_dart-js/JsArray.html">JsArray&lt;E&gt;</a></td><td>A <a href="/dart-sdk-api/api/Dart_dart-core/List.html">List</a> that proxies a JavaScript array.</td></tr><tr><td><a href="/dart-sdk-api/api/Dart_dart-js/JsFunction.html">JsFunction</a></td><td>A proxy on a JavaScript Function object.</td></tr><tr><td><a href="/dart-sdk-api/api/Dart_dart-js/JsObject.html">JsObject</a></td><td>A proxy on a JavaScript object.</td></tr></tbody></table><h2 id="section-properties" tabindex="-1">Properties <a class="header-anchor" href="#section-properties" aria-label="Permalink to &quot;Properties {#section-properties}&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><a href="/dart-sdk-api/api/Dart_dart-js/context.html">context</a></td><td>The JavaScript global object, usually <code>window</code>.</td></tr></tbody></table>`,26)])])}const E=s(n,[["render",r]]);export{c as __pageData,E as default};

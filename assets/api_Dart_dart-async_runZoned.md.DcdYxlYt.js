import{_ as a,o as i,c as n,ag as e}from"./chunks/framework.rAhUSuuf.js";const c=JSON.parse('{"title":"runZoned function","description":"API documentation for the runZoned<R> function from dart:async","frontmatter":{"title":"runZoned<R> function","description":"API documentation for the runZoned<R> function from dart:async","category":"Functions","library":"dart:async","outline":false,"editLink":false,"prev":false,"next":false},"headers":[],"relativePath":"api/Dart_dart-async/runZoned.md","filePath":"api/Dart_dart-async/runZoned.md","lastUpdated":null}'),t={name:"api/Dart_dart-async/runZoned.md"};function r(h,s,p,l,k,o){return i(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="runzoned-r" tabindex="-1">runZoned&lt;R&gt; <a class="header-anchor" href="#runzoned-r" aria-label="Permalink to &quot;runZoned\\&lt;R\\&gt;&quot;">â€‹</a></h1><div class="member-signature"><pre><code><span class="type">R</span> <span class="fn">runZoned&lt;R&gt;</span>(
  <span class="type">R</span> <span class="type">Function</span>() <span class="param">body</span>, {
  <a href="../Dart_dart-core/Map" class="type-link">Map</a>&lt;<a href="../Dart_dart-core/Object" class="type-link">Object</a>?, <a href="../Dart_dart-core/Object" class="type-link">Object</a>?&gt;? <span class="param">zoneValues</span>,
  <a href="./ZoneSpecification" class="type-link">ZoneSpecification</a>? <span class="param">zoneSpecification</span>,
  <a href="../Dart_dart-core/Function" class="type-link">Function</a>? <span class="param">onError</span>,
})</code></pre></div><p>Runs <code>body</code> in its own zone.</p><p>Creates a new zone using <a href="/api/Dart_dart-async/Zone.html#fork">Zone.fork</a> based on <code>zoneSpecification</code> and <code>zoneValues</code>, then runs <code>body</code> in that zone and returns the result.</p><p>Example use:</p><div class="language-dart vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dart</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secret </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;arglebargle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Or a random generated string.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> runZoned</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Future</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delayed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(seconds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">current</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[#</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glop glyf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    zoneValues</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {#_secret</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secret},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    zoneSpecification</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ZoneSpecification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(print</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Zone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> self, parent, zone, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Zone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.current[#_secret] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;--censored--&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      parent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(zone, value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">secret </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Erase the evidence.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Wait for asynchronous computation to complete.</span></span></code></pre></div><p>The new zone intercepts <code>print</code> and stores a value under the private symbol <code>#_secret</code>. The secret is available from the new <a href="/api/Dart_dart-async/Zone.html">Zone</a> object, which is the <a href="/api/Dart_dart-async/Zone.html#prop-current">Zone.current</a> for the body, and is also the first, <code>self</code>, parameter to the <code>print</code> handler function.</p><p>If the <a href="/api/Dart_dart-async/ZoneSpecification.html#prop-handleuncaughterror">ZoneSpecification.handleUncaughtError</a> is set, or the deprecated <code>onError</code> callback is passed, the created zone will be an <em>error zone</em>. Asynchronous errors in futures never cross zone boundaries between zones with a different <a href="/api/Dart_dart-async/Zone.html#prop-errorzone">Zone.errorZone</a>. A consequence of that behavior can be that a <a href="/api/Dart_dart-async/Future.html">Future</a> which completes as an error in the created zone will seem to never complete when used from a zone that belongs to a different error zone. Multiple attempts to use the future in a zone where the error is inaccessible will cause the error to be reported <em>again</em> in it&#39;s original error zone.</p><p>See <a href="/api/Dart_dart-async/runZonedGuarded.html">runZonedGuarded</a> in place of using the deprected <code>onError</code> argument. If <code>onError</code> is provided this function also tries to catch and handle synchronous errors from <code>body</code>, but may throw an error anyway returning <code>null</code> if the generic argument <code>R</code> is not nullable.</p>`,9)])])}const E=a(t,[["render",r]]);export{c as __pageData,E as default};
